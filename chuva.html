<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agro Vision â€¢ Clima</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: black;
      margin: 0;
      padding: 10px;
    }
    h1 {
      text-align: center;
      color: #2e7d32;
      font-size: 22px;
      margin-bottom: 10px;
    }
    .atualizar {
      text-align: center;
      margin-bottom: 10px;
    }
    .atualizar button {
      padding: 10px 20px;
      font-size: 16px;
      background: #4caf50;
      color: black;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .atualizar span {
      display: block;
      margin-top: 6px;
      font-size: 14px;
      color: #555;
    }
    .fazenda {
      background: #00667;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 16px;
      margin-bottom: 20px;
    }
    .fazenda h2 {
      margin-top: 0;
      font-size: 18px;
      color: white;
      text-align: center;
    }
    .previsao {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 10px;
    }
    .dia {
      flex: 1 1 100px;
      background: #e8f5e9;
      border-radius: 8px;
      padding: 10px;
      text-align: center;
      font-size: 14px;
    }
    .dia img {
      width: 48px;
      height: 48px;
    }
    @media (max-width: 480px) {
      .dia {
        font-size: 13px;
      }
      h1 {
        font-size: 20px;
      }
    }
  </style>
</head>
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    position: relative;
  }

  .fundo {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('chuva.png'); /* nome exato da imagem */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.3; /* visibilidade ajustÃ¡vel */
    z-index: -1;
  }
</style>
<body>
<div class="fundo"></div>
  <!-- ConteÃºdo da pÃ¡gina vem aqui -->
  <h1>ğŸŒ¦ï¸ PrevisÃ£o do Tempo â€” Agro Vision</h1>

  <div class="atualizar">
    <button onclick="atualizarTudo()">ğŸ”„ Atualizar previsÃ£o</button>
    <span id="atualizado">ğŸ•’ Ãšltima atualizaÃ§Ã£o: --</span>
  </div>

  <div id="karoline" class="fazenda">
    <h2>ğŸŒ¾ Fazenda Karoline</h2>
    <div class="previsao" id="karoline-previsao">Carregando...</div>
  </div>

  <div id="talisma" class="fazenda">
    <h2>ğŸŒ¿ Fazenda TalismÃ£</h2>
    <div class="previsao" id="talisma-previsao">Carregando...</div>
  </div>

  <div id="karoline2" class="fazenda">
    <h2>ğŸŒ± Fazenda Karoline 2</h2>
    <div class="previsao" id="karoline2-previsao">Carregando...</div>
  </div>

  <script>
    const chave = "ba40c4937b3c4c8bb41161645251611";

    const fazendas = {
      karoline: "-2.9815692,-48.8881788",
      talisma: "-3.1033456,-48.9179346",
      karoline2: "-2.9171154,-48.8416100"
    };

    function carregarPrevisao(id, coords) {
      fetch(`https://api.weatherapi.com/v1/forecast.json?key=${chave}&q=${coords}&days=3&lang=pt`)
        .then(res => res.json())
        .then(data => {
          const dias = data.forecast.forecastday;
          let html = "";
          dias.forEach(d => {
            html += `
              <div class="dia">
                <strong>${d.date}</strong><br>
                <img src="https:${d.day.condition.icon}" alt="${d.day.condition.text}" /><br>
                ${d.day.condition.text}<br>
                ğŸŒ¡ï¸ ${d.day.avgtemp_c}Â°C<br>
                ğŸ’§ ${d.day.daily_chance_of_rain}% chuva
              </div>
            `;
          });
          document.getElementById(id + "-previsao").innerHTML = html;
        })
        .catch(() => {
          document.getElementById(id + "-previsao").innerHTML = "âš ï¸ Erro ao carregar previsÃ£o.";
        });
    }

    function atualizarTudo() {
      carregarPrevisao("karoline", fazendas.karoline);
      carregarPrevisao("talisma", fazendas.talisma);
      carregarPrevisao("karoline2", fazendas.karoline2);
      const agora = new Date();
      const hora = agora.toLocaleTimeString("pt-BR", { hour: '2-digit', minute: '2-digit' });
      const data = agora.toLocaleDateString("pt-BR");
      document.getElementById("atualizado").innerText = `ğŸ•’ Ãšltima atualizaÃ§Ã£o: ${data} Ã s ${hora}`;
    }

    atualizarTudo(); // carrega ao abrir
  </script>
</body>
</html>
